DROP TABLE IF EXISTS Users;
DROP TABLE IF EXISTS Projects;
DROP TABLE IF EXISTS Fields;
DROP TABLE IF EXISTS Images;
DROP TABLE IF EXISTS Records;
DROP TABLE IF EXISTS Value;

CREATE TABLE Users
(
	ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL , 
	username VARCHAR NOT NULL  UNIQUE , 
	password VARCHAR NOT NULL , 
	firstname VARCHAR NOT NULL , 
	lastname VARCHAR NOT NULL , 
	email VARCHAR UNIQUE , 
	num_indexed_records INTEGER, 
	current_batch_id INTEGER DEFAULT -1
);
CREATE TABLE Projects
(
	ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL , 
	title VARCHAR NOT NULL UNIQUE ,
	recordsperimage INTEGER ,
	numfields INTEGER , 
	firstycoord INTEGER NOT NULL ,
	recordheight INTEGER NOT NULL 
);
CREATE TABLE Fields
(
	ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL , 
	title VARCHAR NOT NULL ,
	xcoor INTEGER NOT NULL , 
	width INTEGER,
	helphtml VARCHAR ,
	knowndata VARCHAR, 
	field_number INTEGER NOT NULL ,
	projectID INTEGER NOT NULL 
);
CREATE TABLE Images
(
	ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL ,
	file VARCHAR NOT NULL UNIQUE ,
	hasbeenindexed BOOL DEFAULT 0,
	projectID INTEGER
);
CREATE TABLE Records
(
	ID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL ,
	rownumber INTEGER NOT NULL ,
	imageID INTEGER ,
	hasvalues BOOL DEFAULT 0
);
CREATE TABLE Value
(
	ID INTEGER PRIMARY KEY AUTOINCREMENT  NOT NULL ,	
	value VARCHAR NOT NULL ,
	fieldnum INTEGER ,
	rownum INTGER ,
	imageID INTEGER ,
	recordID INTEGER 
);